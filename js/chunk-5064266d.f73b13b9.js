(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5064266d"],{"2a53":function(e,t,c){"use strict";var n=c("7a23"),a={"aria-label":"Page navigation example"},l={class:"pagination"},o=Object(n["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),r=[o],i=["onClick"],d=Object(n["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),s=[d];function b(e,t,c,o,d,b){return Object(n["openBlock"])(),Object(n["createElementBlock"])("nav",a,[Object(n["createElementVNode"])("ul",l,[Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["page-item",{disabled:!c.pagination.has_pre}])},[Object(n["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){return e.$emit("sendPage",c.pagination.current_page-1)}),["prevent"]))},r)],2),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.pagination.total_pages,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["page-item",{active:t===c.pagination.current_page}]),key:t+"page"},[Object(n["createElementVNode"])("a",{class:"page-link",href:"#",onClick:Object(n["withModifiers"])((function(c){return e.$emit("sendPage",t)}),["prevent"])},Object(n["toDisplayString"])(t),9,i)],2)})),128)),Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["page-item",{disabled:!c.pagination.has_next}])},[Object(n["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(t){return e.$emit("sendPage",c.pagination.current_page+1)}),["prevent"]))},s)],2)])])}var u={props:["pagination"],emit:["sendPage"]},p=c("d959"),O=c.n(p);const m=O()(u,[["render",b]]);t["a"]=m},"3bc8":function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),a={class:"container"},l={class:"row py-5"},o=Object(n["createElementVNode"])("h2",null,"訂單管理",-1),r={class:"col-12 py-3"},i={class:"accordion",id:"orderManger"},d=["id"],s=["onClick","data-bs-target","aria-controls"],b=["id","aria-labelledby"],u={class:"accordion-body"},p={class:"card"},O=Object(n["createElementVNode"])("div",{class:"card-header bg-primary text-light"},"訂單內容",-1),m={class:"card-body"},j={class:"row"},h={class:"col-5"},g=Object(n["createElementVNode"])("h5",null,"客戶資料",-1),E={class:"table table-hover table-striped"},N=Object(n["createElementVNode"])("th",{style:{width:"100px"}},"姓名",-1),V=Object(n["createElementVNode"])("th",null,"住址",-1),f=Object(n["createElementVNode"])("th",null,"電話",-1),v=Object(n["createElementVNode"])("th",null,"E-mail",-1),k={class:"col-7"},y={class:"d-flex justify-content-between"},w=Object(n["createElementVNode"])("h5",null,"訂單細節",-1),S=["disabled","onClick"],C={class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},x=Object(n["createTextVNode"])(" 刪除訂單 "),D={class:"table table-hover table-striped"},B=Object(n["createElementVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),L=Object(n["createElementVNode"])("th",null,"修改付款狀態",-1),_=Object(n["createElementVNode"])("th",null,"下單時間",-1),F=Object(n["createElementVNode"])("td",null,null,-1),I=Object(n["createElementVNode"])("th",null,"付款時間",-1),P=Object(n["createElementVNode"])("td",null,null,-1),$=Object(n["createElementVNode"])("th",null,"付款狀態",-1),z=Object(n["createElementVNode"])("th",null,"總金額",-1),J=Object(n["createElementVNode"])("td",null,null,-1),M={class:"col-12"},T=Object(n["createElementVNode"])("h5",null,"產品清單",-1);function A(e,t,c,A,q,R){var U=Object(n["resolveComponent"])("VueLoading"),X=Object(n["resolveComponent"])("SwitchClick"),G=Object(n["resolveComponent"])("OrderList"),H=Object(n["resolveComponent"])("PaginationComponent");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createVNode"])(U,{active:q.isLoading,"z-index":1060},null,8,["active"]),Object(n["createElementVNode"])("div",l,[o,Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",i,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(q.orders,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"accordion-item",key:e.id+t},[Object(n["createElementVNode"])("h2",{class:"accordion-header",id:"list".concat(e.id)},[Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])(["accordion-button",{collapsed:0!==t}]),type:"button",onClick:function(t){return q.postId=e.id},"data-bs-toggle":"collapse","aria-expanded":"true","data-bs-target":"#collapse".concat(e.id),"aria-controls":"collapse".concat(e.id)},Object(n["toDisplayString"])("訂單編號".concat(e.id)),11,s)],8,d),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["accordion-collapse collapse",{show:0===t}]),id:"collapse".concat(e.id),"data-bs-parent":"#orderManger","aria-labelledby":"list".concat(e.id)},[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("div",p,[O,Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("div",h,[g,Object(n["createElementVNode"])("table",E,[Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[N,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.user.name),1)]),Object(n["createElementVNode"])("tr",null,[V,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.user.address),1)]),Object(n["createElementVNode"])("tr",null,[f,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.user.tel),1)]),Object(n["createElementVNode"])("tr",null,[v,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.user.email),1)])])])]),Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("div",y,[w,Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])(["btn btn-outline-secondary py-0",{buttonDisabledCursor:!0===q.isLoading}]),disabled:!0===q.isLoading,onClick:function(t){q.postId=e.id,R.deleteOrder()}},[Object(n["withDirectives"])(Object(n["createElementVNode"])("span",C,null,512),[[n["vShow"],!0===q.isLoading]]),x],10,S)]),Object(n["createElementVNode"])("table",D,[Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[B,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.id),1),L]),Object(n["createElementVNode"])("tr",null,[_,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(R.showTime(0|e.create_at)),1),F]),Object(n["createElementVNode"])("tr",null,[I,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(R.showTime(0|e.paid_date)),1),P]),Object(n["createElementVNode"])("tr",null,[$,Object(n["createElementVNode"])("td",{class:Object(n["normalizeClass"])({"text-success":!0===e.is_paid,"text-danger":!1===e.is_paid})},Object(n["toDisplayString"])(!0===e.is_paid?"已付款":"未付款"),3),Object(n["createElementVNode"])("td",null,[Object(n["createVNode"])(X,{onClick:function(t){return q.postId=e.id},info:e.id,enabled:R.switchStatus(e.is_paid),onSendEnable:R.changeIsPaid},null,8,["onClick","info","enabled","onSendEnable"])])]),Object(n["createElementVNode"])("tr",null,[z,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.total),1),J])])])]),Object(n["createElementVNode"])("div",M,[T,Object(n["createVNode"])(G,{data:e},null,8,["data"])])])])])])],10,b)])})),128))])]),Object(n["createVNode"])(H,{pagination:q.pagination,onSendPage:t[0]||(t[0]=function(e){return q.page=R.getOrder(e)})},null,8,["pagination"])])])}var q=c("5530"),R=(c("99af"),c("2a53")),U=c("803a"),X={class:"d-flex flex-column"},G={class:"table table-hover table-striped"},H=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{scope:"col"}),Object(n["createElementVNode"])("th",{scope:"col"},"商品名稱"),Object(n["createElementVNode"])("th",{scope:"col"},"總價格"),Object(n["createElementVNode"])("th",{scope:"col"},"數量"),Object(n["createElementVNode"])("th",{scope:"col"},"單價")])],-1),K=["src","alt"];function Q(e,t,c,a,l,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",X,[Object(n["createElementVNode"])("table",G,[H,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.productList,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("img",{src:e.product.imageUrl,alt:e.title,style:{width:"50px",height:"30px"}},null,8,K)]),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.product.title),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.final_total),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.qty),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.product.origin_price>e.product.price?e.product.origin_price:e.product.price),1)])})),128))])])])}c("e9c4");var W={data:function(){return{productList:[]}},props:["data"],watch:{data:function(e){this.productList=JSON.parse(JSON.stringify(e.products))}},mounted:function(){this.productList=JSON.parse(JSON.stringify(this.data.products))}},Y=c("d959"),Z=c.n(Y);const ee=Z()(W,[["render",Q]]);var te=ee,ce=c("1c55"),ne=c("be92"),ae=c("674f"),le={data:function(){return{orders:[],pagination:{},postId:"",isLoading:!1,page:null}},components:{PaginationComponent:R["a"],SwitchClick:U["a"],OrderList:te},methods:Object(q["a"])(Object(q["a"])({},Object(ne["c"])(ae["a"],["addMessage"])),{},{deleteOrder:function(){var e=this;this.isLoading=!0;var t=confirm("確定要刪除本訂單?");!0===t&&this.$http["delete"]("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/admin/order/").concat(this.postId)).then((function(t){e.getOrder(),e.isLoading=!1,e.addMessage({title:"刪除訂單結果",style:"success",content:t.data.message})}))["catch"]((function(t){console.dir(t.response.data.message),e.isLoading=!1,e.addMessage({title:"刪除訂單結果",style:"danger",content:t.response.data.message})}))},changeIsPaid:function(e){var t=this,c={data:{is_paid:this.switchStatus(e)}};this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/admin/order/").concat(this.postId),c).then((function(){t.getOrder()}))["catch"]((function(e){console.dir(e.response.data.message)}))},switchStatus:function(e){var t="";switch(e){case!0:t=1;break;case!1:t=0;break;case 1:t=!0;break;case 0:t=!1;break}return t},getOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/admin/orders?page=").concat(t)).then((function(t){e.orders=t.data.orders,e.pagination=t.data.pagination,e.isLoading=!1}))["catch"]((function(t){console.dir(t.response.data.message),e.isLoading=!1}))},showTime:function(e){return Object(ce["a"])(e)}}),mounted:function(){this.getOrder()}};const oe=Z()(le,[["render",A]]);t["default"]=oe},"803a":function(e,t,c){"use strict";var n=c("7a23"),a={class:"switch"},l=["id","checked"],o=["for"],r=Object(n["createElementVNode"])("span",{class:"switch-txt",turnOn:"是",turnOff:"否"},null,-1),i=Object(n["createElementVNode"])("span",{class:"switch-Round-btn"},null,-1),d=[r,i];function s(e,t,c,r,i,s){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createElementVNode"])("input",{class:"switch-checkbox",type:"checkbox",name:"switch-checkbox",id:c.info||"tempID",checked:1===i.active,onClick:t[0]||(t[0]=function(t){s.activeChange(),e.$emit("send-enable",i.active)})},null,8,l),Object(n["createElementVNode"])("label",{class:"switch-label",for:c.info||"tempID"},d,8,o)])}var b={props:["info","enabled"],data:function(){return{active:0}},methods:{activeChange:function(){0===this.active?this.active=1:1===this.active&&(this.active=0)}},watch:{enabled:function(e){this.active=e}},mounted:function(){this.active=this.enabled||0}},u=(c("b665"),c("d959")),p=c.n(u);const O=p()(b,[["render",s]]);t["a"]=O},"82ca":function(e,t,c){},b0c0:function(e,t,c){var n=c("83ab"),a=c("5e77").EXISTS,l=c("e330"),o=c("9bf2").f,r=Function.prototype,i=l(r.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=l(d.exec),b="name";n&&!a&&o(r,b,{configurable:!0,get:function(){try{return s(d,i(this))[1]}catch(e){return""}}})},b665:function(e,t,c){"use strict";c("82ca")},e9c4:function(e,t,c){var n=c("23e7"),a=c("da84"),l=c("d066"),o=c("2ba4"),r=c("e330"),i=c("d039"),d=a.Array,s=l("JSON","stringify"),b=r(/./.exec),u=r("".charAt),p=r("".charCodeAt),O=r("".replace),m=r(1..toString),j=/[\uD800-\uDFFF]/g,h=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,E=function(e,t,c){var n=u(c,t-1),a=u(c,t+1);return b(h,e)&&!b(g,a)||b(g,e)&&!b(h,n)?"\\u"+m(p(e,0),16):e},N=i((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&n({target:"JSON",stat:!0,forced:N},{stringify:function(e,t,c){for(var n=0,a=arguments.length,l=d(a);n<a;n++)l[n]=arguments[n];var r=o(s,null,l);return"string"==typeof r?O(r,j,E):r}})}}]);
//# sourceMappingURL=chunk-5064266d.f73b13b9.js.map