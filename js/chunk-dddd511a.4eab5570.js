(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dddd511a"],{"00e8":function(e,t,c){"use strict";c("e57b")},"2ac0":function(e,t,c){"use strict";c("99af");var a=c("bc3a"),n=c.n(a),o=c("be92"),s=c("674f"),r=Object(s["a"])();t["a"]=Object(o["b"])("cartStore",{state:function(){return{cartData:[],cartLength:0,isCartLoading:!1,isChangeNum:!1}},actions:{getCart:function(){var e=this;n.a.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/cart")).then((function(t){e.cartData=t.data.data,e.cartLength=t.data.data.carts.length}))["catch"]((function(e){console.dir(e.response.data.message)}))},deleteAllCarts:function(){var e=this;!0===confirm("確定將會刪除所有購物車內容?")?n.a["delete"]("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/carts")).then((function(t){e.getCart(),r.addMessage({title:"刪除所有購物車結果",style:"success",content:t.data.message})}))["catch"]((function(e){r.addMessage({title:"刪除所有購物車結果",style:"success",content:e.response.data.message})})):alert("已取消刪除")},deleteCart:function(e,t){var c=this;this.isCartLoading=!0,n.a["delete"]("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/cart/").concat(e)).then((function(e){c.getCart(),r.addMessage({title:"刪除購物車結果",style:"success",content:t+e.data.message}),c.isCartLoading=!1}))["catch"]((function(e){console.dir(e.response.data.message),r.addMessage({title:"刪除購物車結果",style:"danger",content:e.response.data.message})}))},editCart:function(e,t){var c=this;n.a.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/cart/").concat(e),t).then((function(e){c.isChangeNum=!1,c.isCartLoading=!1,c.getCart(),r.addMessage({title:"編輯購物車結果",style:"success",content:e.data.message})}))["catch"]((function(e){console.dir(e.response.data.message),r.addMessage({title:"編輯購物車結果",style:"danger",content:e.response.data.message})}))},isCartLoadingTrue:function(){this.isCartLoading=!0},isChangeNumTrue:function(){this.isChangeNum=!0}}})},"99af":function(e,t,c){"use strict";var a=c("23e7"),n=c("da84"),o=c("d039"),s=c("e8b5"),r=c("861d"),i=c("7b0b"),l=c("07fa"),d=c("8418"),u=c("65f0"),b=c("1dde"),m=c("b622"),p=c("2d00"),h=m("isConcatSpreadable"),O=9007199254740991,g="Maximum allowed index exceeded",j=n.TypeError,f=p>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),v=b("concat"),N=function(e){if(!r(e))return!1;var t=e[h];return void 0!==t?!!t:s(e)},E=!f||!v;a({target:"Array",proto:!0,forced:E},{concat:function(e){var t,c,a,n,o,s=i(this),r=u(s,0),b=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?s:arguments[t],N(o)){if(n=l(o),b+n>O)throw j(g);for(c=0;c<n;c++,b++)c in o&&d(r,b,o[c])}else{if(b>=O)throw j(g);d(r,b++,o)}return r.length=b,r}})},b0c0:function(e,t,c){var a=c("83ab"),n=c("5e77").EXISTS,o=c("e330"),s=c("9bf2").f,r=Function.prototype,i=o(r.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(l.exec),u="name";a&&!n&&s(r,u,{configurable:!0,get:function(){try{return d(l,i(this))[1]}catch(e){return""}}})},b867:function(e,t,c){"use strict";c("caad");var a=c("7a23"),n={class:"container my-2"},o={class:"shoppingProcess d-flex justify-content-center align-items-center"},s=Object(a["createElementVNode"])("div",{class:"fromGroup d-flex align-items-center"},[Object(a["createElementVNode"])("div",{class:"step text-center"},"1"),Object(a["createElementVNode"])("p",{class:"m-0 p-0"},"寫訂購資料")],-1),r=Object(a["createElementVNode"])("i",{class:"bi bi-caret-right"},null,-1),i=Object(a["createElementVNode"])("div",{class:"step text-center"},"2",-1),l=Object(a["createElementVNode"])("p",{class:"m-0 p-0"},"確認資料與付款",-1),d=[i,l],u=Object(a["createElementVNode"])("i",{class:"bi bi-caret-right"},null,-1),b=Object(a["createElementVNode"])("div",{class:"step text-center"},"3",-1),m=Object(a["createElementVNode"])("p",{class:"m-0 p-0"},"付款完成",-1),p=[b,m];function h(e,t,c,i,l,b){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",n,[Object(a["createElementVNode"])("div",o,[s,r,Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["fromGroup d-flex align-items-center opacity-low",{"opacity-1":["confirmAndPay","payProcessFinished"].includes(c.currentStatus)}])},d,2),u,Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["fromGroup d-flex align-items-center opacity-low",{"opacity-1":"payProcessFinished"===c.currentStatus||c.payment}])},p,2)])])}var O={props:["currentStatus","payment"],mounted:function(){}},g=(c("00e8"),c("d959")),j=c.n(g);const f=j()(O,[["render",h]]);t["a"]=f},b937:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),n={class:"container pt-9"},o={class:"row justify-content-center"},s={class:"col-12 col-lg-8"},r=Object(a["createElementVNode"])("h2",{class:"mb-3 border-bottom border-2"},"已購商品清單",-1),i={class:"table-responsive"},l={class:"table table-hover"},d=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",null,"品名"),Object(a["createElementVNode"])("th",null,"數量"),Object(a["createElementVNode"])("th",null,"單位"),Object(a["createElementVNode"])("th",null,"價格")])],-1),u={class:"d-flex w-100 flex-row-reverse"},b=Object(a["createElementVNode"])("h2",{class:"mb-3 border-bottom border-2"},"訂購者資訊",-1),m={class:"table-responsive"},p={class:"table table-hover table-striped"},h=Object(a["createElementVNode"])("th",null,"姓名",-1),O=Object(a["createElementVNode"])("th",null,"電話",-1),g=Object(a["createElementVNode"])("th",null,"住址",-1),j=Object(a["createElementVNode"])("th",null,"付款狀態",-1),f={key:0,class:"row justify-content-center"},v={class:"col-12 col-lg-8"},N=Object(a["createElementVNode"])("h2",{class:"mb-3 border-bottom border-2"},"選擇付款方式",-1),E={class:"d-flex mb-3"},V=Object(a["createElementVNode"])("option",{value:"0",selected:"",disabled:""},"請選擇付款方式",-1),y=Object(a["createElementVNode"])("option",{value:"1"},"ATM匯款",-1),C=Object(a["createElementVNode"])("option",{value:"2"},"信用卡",-1),x=Object(a["createElementVNode"])("option",{value:"3"},"貨到付款",-1),L=[V,y,C,x],w=["disabled"],S={class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k=Object(a["createTextVNode"])(" 確認付款 ");function P(e,t,c,V,y,C){var x=Object(a["resolveComponent"])("VueLoading"),P=Object(a["resolveComponent"])("GuestPayProcessInspector");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",n,[Object(a["createVNode"])(x,{active:y.isLoadingPage,"z-index":1060},null,8,["active"]),Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",s,[Object(a["createVNode"])(P,{"current-status":y.confirmAndPay,payment:y.is_paid},null,8,["current-status","payment"]),r,Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("table",l,[d,(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(y.products,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tbody",{key:e.id},[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.product.title),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.qty),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.product.unit),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.total),1)])])})),128))]),Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("span",null,"小計:"+Object(a["toDisplayString"])(y.total)+"元",1)])]),b,Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("table",p,[Object(a["createElementVNode"])("tbody",null,[Object(a["createElementVNode"])("tr",null,[h,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(y.user.name),1)]),Object(a["createElementVNode"])("tr",null,[O,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(y.user.tel),1)]),Object(a["createElementVNode"])("tr",null,[g,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(y.user.address),1)]),Object(a["createElementVNode"])("tr",null,[j,Object(a["createElementVNode"])("td",{class:Object(a["normalizeClass"])({"text-success":y.is_paid,"text-danger":!y.is_paid})},Object(a["toDisplayString"])(y.is_paid?"已付款":"未付款"),3)])])])])])]),y.is_paid?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",f,[Object(a["createElementVNode"])("div",v,[N,Object(a["createElementVNode"])("div",E,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return y.payment=e}),class:"form-select"},L,512),[[a["vModelSelect"],y.payment]]),Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["btn btn-primary text-white text-nowrap",{buttonDisabledCursor:y.isLoading||0===y.payment}]),type:"button",onClick:t[1]||(t[1]=function(e){return C.pay()}),disabled:y.isLoading||0===y.payment},[Object(a["withDirectives"])(Object(a["createElementVNode"])("span",S,null,512),[[a["vShow"],y.isLoading]]),k],10,w)])])]))])}var D=c("5530"),M=(c("99af"),c("be92")),B=c("674f"),_=c("2ac0"),A=c("b867"),T={data:function(){return{user:{},message:"",products:[],total:"",is_edit:!0,id:"",is_paid:"",payment:0,isLoadingPage:!1,isLoading:!1,confirmAndPay:"confirmAndPay"}},components:{GuestPayProcessInspector:A["a"]},methods:Object(D["a"])(Object(D["a"])(Object(D["a"])({},Object(M["c"])(B["a"],["addMessage"])),Object(M["c"])(_["a"],["getCart"])),{},{pay:function(){var e=this;this.isLoading=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/pay/").concat(this.id)).then((function(t){e.isLoading=!1,e.addMessage({title:"付款結果",style:"success",content:"".concat(t.data.message)}),e.getOrder(),alert("已完成付款"),e.$router.push("/guestOrderFinished")}))["catch"]((function(t){console.dir(t.response.data.message),e.isLoading=!1,e.addMessage({title:"付款結果",style:"danger",content:"".concat(t.response.data.message)})}))},getOrder:function(){var e=this,t=this.$route.params.id;this.isLoadingPage=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chun-chia","/order/").concat(t)).then((function(t){e.products=t.data.order.products,e.total=t.data.order.total,e.user=t.data.order.user,e.id=t.data.order.id,e.is_paid=t.data.order.is_paid,e.isLoadingPage=!1}))["catch"]((function(t){console.log(t.response.data.message),e.isLoadingPage=!1}))}}),mounted:function(){this.getOrder(),this.getCart()}},z=c("d959"),F=c.n(z);const G=F()(T,[["render",P]]);t["default"]=G},caad:function(e,t,c){"use strict";var a=c("23e7"),n=c("4d64").includes,o=c("44d2");a({target:"Array",proto:!0},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},e57b:function(e,t,c){}}]);
//# sourceMappingURL=chunk-dddd511a.4eab5570.js.map